<!DOCTYPE html>
<html>

<head>
  <title>Storby</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= csrf_meta_tags %>
  <%= csp_meta_tag %>

  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
</head>

<body>
  <nav class="navbar" role="navigation" aria-label="main navigation">
    <%# navbar %>
    <div class="container">
      <div class="navbar-brand">
        <a href="/" class="navbar-item">
          Storby
        </a>
        <a role="button" class="navbar-burger" aria-label="menu" aria-expanded="false">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>

          <%# <%= fa_icon "bars" %>
        </a>
      </div>
      <div class="navbar-menu">
        <div class="navbar-start">
          <div class="navbar-item is-hoverable has-dropdown">
            <a class="navbar-link">
              <span>Games</span>
            </a>
            <div class="navbar-dropdown">
              <a href="#" class="navbar-item">
                Action
              </a>
              <a href="#" class="navbar-item">
                Adventure
              </a>
              <a href="#" class="navbar-item">
                Strategy
              </a>
              <hr class="navbar-divider">
              <%= link_to "All games", games_path, method: :get, :class => 'navbar-item'  %>              
            </div>
          </div>
          <% if !user_signed_in? %>
          <div class="navbar-item">
            <div class="buttons">
              <%= link_to "Sign up", new_user_registration_path, :class => 'button is-primary'  %>
              <%= link_to "Login", new_user_session_path, :class => 'button is-light'  %>
            </div>
          </div>
          <% end %>

        </div>
        <div class="navbar-end">
          <div class="navbar-item">
            <div class="field has-addons">
              <div class="control">
                <input class="input is-primary" type="text" placeholder="Search...">
              </div>
              <div class="control">
                <a class="button is-primary">
                  <%= fa_icon "search" %>
                </a>
              </div>
            </div>
          </div>
          <% if user_signed_in? %>
          <div class="navbar-item has-dropdown is-hoverable">
            <a class="navbar-link is-arrowless">
              <span><%= current_user.email %></span>
            </a>
            <div class="navbar-dropdown">
              <%= link_to 'Edit profile', edit_user_registration_path, :class => 'navbar-item' %>
              <a href="#" class="navbar-item">
                Library
              </a>
              <hr class="navbar-divider">
              <%= link_to "Logout", destroy_user_session_path, method: :delete, :class => 'navbar-item'  %>
            </div>
          </div>
          <%= link_to(edit_user_registration_path, class: 'navbar-item') do %>

          <%= image_tag(url_for(current_user.profile_pic), size: "64x64", style: 'object-fit: cover;', class: 'navbar-avatar') %>
          <% end %>
          <% end %>

        </div>
      </div>
    </div>
  </nav>
  <% if notice %>
  <p class="alert alert-success"><%= notice %></p>
  <% end %>
  <% if alert %>
  <p class="alert alert-danger"><%= alert %></p>
  <% end %>
  <div class="container">
    <%= yield %>
  </div>
</body>

</html>